generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// User model for authentication
model User {
  id        String   @id @default(uuid())
  username  String   @unique
  password  String
  nama      String
  role      Role     @default(OPD)
  status    Status   @default(AKTIF)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  profilInovasi ProfilInovasi[]

  @@map("users")
}

// Profil Inovasi model
model ProfilInovasi {
  id               String       @id @default(uuid())
  namaInovasi      String
  inovator         String
  jenisInovasi     JenisInovasi
  bentukInovasi    String
  tanggalUjiCoba   DateTime
  tanggalPenerapan DateTime
  rancangBangun    String       @db.Text
  tujuanInovasi    String       @db.Text
  manfaatInovasi   String       @db.Text
  hasilInovasi     String       @db.Text
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt

  // Relations
  userId           String
  user             User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  indikatorInovasi IndikatorInovasi?

  @@map("profil_inovasi")
}

// Indikator Inovasi model
model IndikatorInovasi {
  id                              String   @id @default(uuid())
  regulasiInovasiDaerah           String // PDF file name
  ketersediaanSDM                 String // PDF file name
  dukunganAnggaran                String // PDF file name
  alatKerja                       String // PDF/Photo file name
  bimtekInovasi                   String // PDF file name
  integrasiProgramRKPD            String // PDF file name
  keterlibatanAktorInovasi        String // PDF file name
  pelaksanaInovasiDaerah          String // PDF file name
  jejaringInovasi                 String // PDF file name
  sosialisasiInovasiDaerah        String // PDF/Photo file name
  pedomanTeknis                   String // PDF/Photo file name
  kemudahanInformasiLayanan       String // PDF/Photo file name
  kemudahanProsesInovasi          String // PDF file name
  penyelesaianLayananPengaduan    String // PDF/Photo file name
  layananTerintegrasi             String // PDF/Photo file name
  replikasi                       String // PDF file name
  kecepatanPenciptaanInovasi      String // PDF file name
  kemanfaatanInovasi              String // PDF file name
  monitoringEvaluasiInovasiDaerah String // PDF file name
  kualitasInovasiDaerah           String // YouTube link
  createdAt                       DateTime @default(now())
  updatedAt                       DateTime @updatedAt

  // Relations
  profilInovasiId String        @unique
  profilInovasi   ProfilInovasi @relation(fields: [profilInovasiId], references: [id], onDelete: Cascade)

  @@map("indikator_inovasi")
}

// Role enum
enum Role {
  ADMIN
  OPD
}

// Status enum
enum Status {
  AKTIF
  TIDAK_AKTIF
}

// Jenis Inovasi enum
enum JenisInovasi {
  DIGITAL
  NON_DIGITAL
}

model CarouselImage {
  id        String   @id @default(cuid())
  title     String?
  path      String
  sortOrder Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("carousel_images")
}

model SystemTitle {
  id        String   @id @default(cuid())
  title     String   @db.Text
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("system_titles")
}

model Kontak {
  id        String   @id @default(cuid())
  namaDinas String
  alamat    String
  telepon   String
  email     String
  kodePos   String
  latitude  String
  longitude String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("kontak")
}
